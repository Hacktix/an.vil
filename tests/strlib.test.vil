#include "harness.test.vil"
#include "../strlib.vil"

fn main() {
    print_title("str.num()");

    print_section("Basic Usage - No Base Parameter");
    log_case("Positive Integer", str.num(10), "10");
    log_case("Negative Integer", str.num(-10), "-10");
    log_case("Zero", str.num(0), "0");
    print_cases();
    
    print_section("Basic Usage - Base 8");
    log_case("Positive Integer (below base)", str.num(7,8), "7");
    log_case("Positive Integer (above base)", str.num(10,8), "12");
    log_case("Negative Integer (below base)", str.num(-7,8), "-7");
    log_case("Negative Integer (above base)", str.num(-10,8), "-12");
    log_case("Zero", str.num(0), "0");
    print_cases();
    
    print_section("Basic Usage - Base 16");
    log_case("Positive Integer (below base)", str.num(8,16), "8");
    log_case("Positive Integer (above base)", str.num(31,16), "1f");
    log_case("Negative Integer (below base)", str.num(-8,16), "-8");
    log_case("Negative Integer (above base)", str.num(-31,16), "-1f");
    log_case("Zero", str.num(0), "0");
    print_cases();
    
    print_section("Edge Cases - Value Parameter");
    log_case("Decimal", str.num(7/3), "2");
    log_case("Infinity", str.num(Infinity), nil);
    log_case("nil", str.num(nil), nil);
    log_case("Non-number", str.num("abc"), nil);
    print_cases();
    
    print_section("Edge Cases - Base Parameter");
    log_case("Decimal", str.num(10,7/3), "1010");
    log_case("Infinity", str.num(10,Infinity), nil);
    log_case("nil", str.num(10,nil), nil);
    log_case("Non-number", str.num(10,"abc"), nil);
    log_case("One", str.num(10,1), nil);
    log_case("Zero", str.num(10,0), nil);
    log_case("Negative", str.num(10,-1), nil);
    print_cases();
}